<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portal Feedback - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/home.css" />
  <!-- Patch: redireciona fetch('/rota') para o backend Flask -->
  <script>
    (function () {
      const API_BASE = 'http://127.0.0.1:5000';
      const origFetch = window.fetch.bind(window);
      window.fetch = (input, init) => {
        const toUrl = v => (typeof v === 'string' ? v : v.url);
        let url = toUrl(input);
        if (/^\/(?!\/)/.test(url)) url = API_BASE + url;
        return origFetch(url, init);
      };
    })();
  </script>
</head>
<body>

  <header class="header d-flex align-items-center justify-content-between px-4 py-3">
    <div class="d-flex align-items-center gap-3">
      <img src="img/logo-if.png" alt="Logo IFCE" class="logo-ifce" />
    </div>
    <h2 class="mb-0 mx-auto">Portal Feedback</h2>
    <button id="btnSair" class="btn btn-outline-secondary">Sair</button>
  </header>

  <!-- üîç Campo de busca -->
  <section class="container mt-3 mb-3">
    <div class="search-box d-flex justify-content-center align-items-center gap-2">
      <input id="campoBusca" type="text" placeholder="Buscar reclama√ß√£o por t√≠tulo..." class="form-control w-50" />
      <button id="btnBuscar" class="btn btn-success">Buscar</button>
    </div>
  </section>

  <nav class="nav-categorias d-flex justify-content-center gap-4 py-2">
    <a href="#infraestrutura" class="categoria">Infraestrutura</a>
    <a href="#alimentacao" class="categoria">Alimenta√ß√£o</a>
    <a href="#transporte" class="categoria">Transporte</a>
    <a href="#tiportais" class="categoria">TI/Portais</a>
    <a href="#academico" class="categoria">Acad√™mico</a>
    <a href="#eventoscalendario" class="categoria">Eventos/Calend√°rio</a>
    <a href="#seguranca" class="categoria">Seguran√ßa</a>
  </nav>

  <div class="menu-flutuante">
    <button id="toggleMenu" class="btn-flutuante">+</button>
    <div id="menuAcoes" class="acoes hidden">
      <button onclick="criarPublicacao()" class="acao-btn">Criar Publica√ß√£o</button>
      <button onclick="verFavoritos()" class="acao-btn">Ver Favoritos</button>
    </div>
  </div>

  <script>
    // Evento de busca ‚Üí redireciona para resultados.html
    document.getElementById('btnBuscar').addEventListener('click', () => {
      const termo = document.getElementById('campoBusca').value.trim();
      if (!termo) {
        alert('Digite uma palavra para buscar.');
        return;
      }
      window.location.href = `resultados.html?nome=${encodeURIComponent(termo)}`;
    });
  </script>

  <script src="js/home.js"></script>
</body>
</html>
